<!DOCTYPE html>
<html>
<head>
<title></title>
    <script src="https://code.createjs.com/createjs-2015.05.21.min.js"></script>
    <script src="https://code.createjs.com/1.0.0/soundjs.min.js"></script>
<style>
body
            {
                margin: 0;
                padding:15px;
                background-color:lightslategray;
            }
            canvas
            {
                border: solid 2px #000;
                background-color: #fff;
                display: block;
                margin-left: auto;
                margin-right: auto;
                padding-left: 0px;
                padding-right: 0px;
                background-image: url("img/bg_jungle.png");
                background-repeat: no-repeat;
                position: relative;
                top: 50px;
                background-size:120%;
                max-height: 800px;
            }
</style>
</head>
<body onload="init();">
<canvas id="testCanvas" width="1500px" height="800px"></canvas>
<script>

 const BALL_RADIOUS = 20;
  const KEYCODE_LEFT = 37;
        const KEYCODE_RIGHT = 39;
        const KEYCODE_UP = 38;
        const KEYCODE_DOWN = 40;
        const SPACEBAR = 32;
        var keyboardMoveLeft = false;
        var keyboardMoveRight = false;
        var keyboardMoveDown = false;
        var keyboardMoveUp = false;
        var ball;
        var myObstacle;

        

        function tick()
        {

          stage.update();



            if(keyboardMoveLeft)
            {
  
             ball.x -= 20;

            }
            if(keyboardMoveRight)
            {
            
             ball.x += 20;

            }
            if(keyboardMoveUp)
            {
            
             ball.y -= 20;

            }
            if(keyboardMoveDown)
            {
            
             ball.y += 20;

            }


            if(ball.x<-5)
            {

                ball.x = -5;
            }
            if(ball.x>stage.canvas.width - BALL_RADIOUS*5)
            {

                ball.x = stage.canvas.width - BALL_RADIOUS*5;
            }


            if(ball.y>stage.canvas.height - BALL_RADIOUS*2)
            {

                ball.y = stage.canvas.height - BALL_RADIOUS*2;
            }
            if(ball.y<0 )
            {
            ball.y= 0;
                
            }

        }

 function init()
 {
     //CallLoader Bar
   // initLoader()
    ////////////


     stage = new createjs.Stage("testCanvas"); 
     createjs.Touch.enable(stage);
     createjs.Ticker.setFPS(60);
     createjs.Ticker.addEventListener("tick", tick);
 
     obstacle();
     crearimage();
  

     stage.update();
     window.onkeyup = keyUpHandler;
              window.onkeydown = keyDownHandler;
         
              stage.canvas.height =window.innerHeight;
 }


 function obstacle()
 {

 for(var i=100;i<=1000;i+=5)
 {
 for(var j=100;j<=1000;j+=200)
 {
 myObstacle = new createjs.Shape();
 myObstacle.graphics.beginFill("Red").drawCircle(50,100, BALL_RADIOUS);
 myObstacle.x = i;
 myObstacle.y = j;
   
   //stage.addChild(myObstacle);
 } 
 }
 //myObstacle = new createjs.Shape();
 //myObstacle.graphics.beginFill("Red").drawCircle(50,100, BALL_RADIOUS);
 //myObstacle.x = 540;
 //myObstacle.y = 100;
   //myObstacle = new component(10, 200, "green", 300, 120); 
   //stage.addChild(myObstacle);
 }
    

        function crearimage()
        {

        var platform1 = new Image();
        platform1.src = 'img/jungle_pack_19.png';
        
        var platform2 = new Image();
        platform2.src = 'img/jungle_pack_13.png';

        var platform3 = new Image();
        platform3.src = 'img/jungle_pack_40.png';

        var platform4 = new Image();
        platform4.src = 'img/jungle_pack_21.png';

        var platform5 = new Image();
        platform5.src = 'img/jungle_pack_41.png';

        var platform6 = new Image();
        platform6.src = 'img/jungle_pack_09.png';

        var platform7 = new Image();
        platform7.src = 'img/jungle_pack_05.png';

        var platform8 = new Image();
        platform8.src = 'img/jungle_pack_35.png';

        var water = new Image();
        water.src = 'img/jungle_pack_52.png';

        ball = new createjs.Bitmap(platform1);
        ball.x = 200;
        ball.y = 300;

        tempPlat2 = new createjs.Bitmap(platform2);
        tempPlat2.x = ball.x+128;
        tempPlat2.y = 300;

        tempPlat3 = new createjs.Bitmap(platform3);
        tempPlat3.x = tempPlat2.x+128;
        tempPlat3.y = 300;
        
        tempPlat4 = new createjs.Bitmap(platform4);
        tempPlat4.x = ball.x+128;
        tempPlat4.y = 363;

        tempPlat5 = new createjs.Bitmap(platform5);
        tempPlat5.x = tempPlat3.x+300;
        tempPlat5.y = 300;

        tempPlat6 = new createjs.Bitmap(platform6);
        tempPlat6.x = tempPlat5.x+300;
        tempPlat6.y = 300;

        tempPlat7 = new createjs.Bitmap(platform7);
        tempPlat7.x = tempPlat6.x+128;
        tempPlat7.y = 300;

        tempPlat8 = new createjs.Bitmap(platform8);
        tempPlat8.x = tempPlat7.x;
        tempPlat8.y = tempPlat7.y + 128;

        tempPlat9 = new createjs.Bitmap(platform8);
        tempPlat9.x = tempPlat8.x;
        tempPlat9.y = tempPlat8.y + 128;
        
        //Loop for Water
        var xVal =0;
        for(i=0; i<12;i++)
        {
            tempWater = new createjs.Bitmap(water);
            tempWater.x = xVal;
            tempWater.y = 820;
            stage.addChild(tempWater);
            xVal=xVal+128;
        }
        

        //To play the background music
        //var audio = new Audio('M-GameBG.ogg');
        //audio.play();

        // Create a single item to load.
		src = "sound/M-GameBG.ogg";

		createjs.Sound.alternateExtensions = ["mp3"];	// add other extensions to try loading if the src file extension is not supported
		//createjs.Sound.onLoadComplete = playSound;  // add a callback for when load is completed
        
        createjs.Sound.addEventListener("fileload", playSound);

        
        //soundInstance = createjs.Sound.play(src);  // start playing the sound we just loaded, storing the playing instance
		createjs.Sound.registerSound(src);  // register sound, which preloads by default



        stage.addChild(ball, tempPlat2, tempPlat3, tempPlat4, tempPlat5, tempPlat6, tempPlat7, tempPlat8, tempPlat9);
        }

         function keyDownHandler(e)
        {
         switch(e.keyCode)
         {
          case KEYCODE_LEFT: keyboardMoveLeft = true; break;
          case KEYCODE_RIGHT: keyboardMoveRight = true; break;
          case KEYCODE_UP: keyboardMoveUp = true; break;
          case KEYCODE_DOWN: keyboardMoveDown = true; break;
         }
        }

         function keyUpHandler(e)
         {

  switch(e.keyCode)
         {

          case KEYCODE_LEFT: keyboardMoveLeft = false; break;
          case KEYCODE_RIGHT: keyboardMoveRight = false; break;
          case KEYCODE_UP: keyboardMoveUp = false; break;
          case KEYCODE_DOWN: keyboardMoveDown = false; break;
          
         }          
         }


    function playSound(event) {
		soundInstance = createjs.Sound.play(event.src);  // start playing the sound we just loaded, storing the playing instance
	}



    ///ForLoader///

    function initLoader() {
        setupStage();
        buildLoaderBar();
        startLoad();
    }
    function setupStage() {
        stage = new createjs.Stage(document.getElementById('canvas'));
        createjs.Ticker.addEventListener("tick", runGame);
        createjs.Ticker.setFPS(60);
    }
    function buildLoaderBar() {
        loaderBar = new createjs.Shape();
        loaderBar.x = loaderBar.y = 100;
        loaderBar.graphics.setStrokeStyle(2);
        loaderBar.graphics.beginStroke("#000");
        loaderBar.graphics.drawRect(0, 0, LOADER_WIDTH, 40);
        stage.addChild(loaderBar);
    }
    function updateLoaderBar() {
        loaderBar.graphics.beginFill('#00ff00');
        loaderBar.graphics.drawRect(0, 0, LOADER_WIDTH * percentLoaded, 40);
        loaderBar.graphics.endFill();
        loaderBar.graphics.setStrokeStyle(2);
        loaderBar.graphics.beginStroke("#000");
        loaderBar.graphics.drawRect(0, 0, LOADER_WIDTH, 40);
        loaderBar.graphics.endStroke();
    }
    function startLoad() {
        loadInterval = setInterval(updateLoad, 50);
    }
    function updateLoad() {
        percentLoaded += .005;
        updateLoaderBar();
        if (percentLoaded >= 1) {
            clearInterval(loadInterval);
            stage.removeChild(loaderBar);
        }
    }
    function runGame(e) {
        stage.update();
    }

    ///Loader Ends///

</script>
</body>
</html>